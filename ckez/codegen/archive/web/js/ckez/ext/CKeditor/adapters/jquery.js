(function(){CKEDITOR.config.jqueryOverrideVal=typeof CKEDITOR.config.jqueryOverrideVal=="undefined"?true:CKEDITOR.config.jqueryOverrideVal;var a=window.jQuery;if(typeof a=="undefined"){return}a.extend(a.fn,{ckeditorGet:function(){var b=this.eq(0).data("ckeditorInstance");if(!b){throw"CKEditor not yet initialized, use ckeditor() with callback."}return b},ckeditor:function(d,b){if(!CKEDITOR.env.isCompatible){return this}if(!a.isFunction(d)){var c=b;b=d;d=c}b=b||{};this.filter("textarea, div, p").each(function(){var e=a(this),h=e.data("ckeditorInstance"),f=e.data("_ckeditorInstanceLock"),g=this;if(h&&!f){if(d){d.apply(h,[this])}}else{if(!f){if(b.autoUpdateElement||(typeof b.autoUpdateElement=="undefined"&&CKEDITOR.config.autoUpdateElement)){b.autoUpdateElementJquery=true}b.autoUpdateElement=false;e.data("_ckeditorInstanceLock",true);h=CKEDITOR.replace(g,b);e.data("ckeditorInstance",h);h.on("instanceReady",function(j){var i=j.editor;setTimeout(function(){if(!i.element){setTimeout(arguments.callee,100);return}j.removeListener("instanceReady",this.callee);i.on("dataReady",function(){e.trigger("setData.ckeditor",[i])});i.on("getData",function(l){e.trigger("getData.ckeditor",[i,l.data])},999);i.on("destroy",function(){e.trigger("destroy.ckeditor",[i])});if(i.config.autoUpdateElementJquery&&e.is("textarea")&&e.parents("form").length){var k=function(){e.ckeditor(function(){i.updateElement()})};e.parents("form").submit(k);e.parents("form").bind("form-pre-serialize",k);e.bind("destroy.ckeditor",function(){e.parents("form").unbind("submit",k);e.parents("form").unbind("form-pre-serialize",k)})}i.on("destroy",function(){e.data("ckeditorInstance",null)});e.data("_ckeditorInstanceLock",null);e.trigger("instanceReady.ckeditor",[i]);if(d){d.apply(i,[g])}},0)},null,null,9999)}else{CKEDITOR.on("instanceReady",function(j){var i=j.editor;setTimeout(function(){if(!i.element){setTimeout(arguments.callee,100);return}if(i.element.$==g){if(d){d.apply(i,[g])}}},0)},null,null,9999)}}});return this}});if(CKEDITOR.config.jqueryOverrideVal){a.fn.val=CKEDITOR.tools.override(a.fn.val,function(b){return function(e,f){var d=typeof e!="undefined",c;this.each(function(){var h=a(this),g=h.data("ckeditorInstance");if(!f&&h.is("textarea")&&g){if(d){g.setData(e)}else{c=g.getData();return null}}else{if(d){b.call(h,e)}else{c=b.call(h);return null}}return true});return d?this:c}})}})();